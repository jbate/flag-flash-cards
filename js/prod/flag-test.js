$(function(){function n(i){var c=$("<img/>",{src:"svg/country-4x3/"+i.toLowerCase()+".svg"}).on("click",function(){t()}).on("dblclick",function(){n(a(++o))});$("body").html("<div><h1>"+e[i].Name+"</h1> "+(e[i].Capital?e[i].Capital.Name:"No Capital")+"</div>").append(c);{var h=document.getElementsByTagName("img")[0];Hammer(h).on("swipedown swipeup",function(){t()}).on("doubletap",function(){n(a(++o))}).on("swipeleft",function(n){n.which=39,w(n)}).on("swiperight",function(n){n.which=37,w(n)})}}function t(){$("img, div").toggleClass("slide")}var e,i,o=0;$.getJSON("iso-3166-1.json",function(t){e=t.Results,i=Object.keys(e),i.sort(function(){return.5-Math.random()}),n(c()||a(o))});var a=function(n){return i[n].toUpperCase()},c=function(){var n=location.hash;return n.length>0?(n=n.slice(1,3).toUpperCase(),i.indexOf(n)>0?n:!1):!1},h=function(){var t=c();return t&&n(t),!1},w=function(e){(37==e.which||39==e.which)&&(o=37==e.which?--o:++o,(0>o||o>i.length)&&(o=0),n(a(o))),(38==e.which||40==e.which)&&t()};window.addEventListener?window.addEventListener("hashchange",h,!1):window.attachEvent&&window.attachEvent("onhashchange",h),window.addEventListener?window.addEventListener("keydown",w,!1):window.attachEvent&&window.attachEvent("onkeydown",w)});